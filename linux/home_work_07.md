# Процессы - теория
https://youtu.be/vWQ5KN9o70k

# Процессы - практика
1) Запустить в фоновом режиме процесс `sleep 100000`; с помощью ps и grep найти его PID. Затем вывести информацию о процессе по его PID
2) С помощью утилиты `kill` завершить процесс `sleep 100000`
3) Запустить процесс `nohup tail -f /var/log/syslog &` найти его PPID и PID; завершить процесс с помощью `kill`
4) Запустить `bash -c 'sleep 300 & exec sleep 400'` и используя `pstree` или `ps` с ключами выяснить какой из процессов родитель, а какой потомок
5) Запустить нескольок процессов `sleep` с разными интервалами времени в фоновом режиме; с помощью `jobs` вывести список этих процессов; используя `killall` завершить все процессы
6) Снова запустить `nohup tail -f /var/log/syslog &` и найти его PID; далее с помощью `lsof -p <PID>` вывести список файлов, которые использует этот процесс
7) Запустить процесс `yes > /dev/null &`; запустить top и найти этот процесс по высокому %CPU. Внутри top отсортировать процессы по потреблению памяти

# Установка ПО
1) Установить из [deb-пакета ](https://github.com/sharkdp/bat/releases/download/v0.25.0/bat_0.25.0_amd64.deb) утилиту `bat` - аналог `cat`, но она выводит на экран текст 
с подсветкой синтаксиса и если текст не влезает в экран, то использует интерактивный режим с возможностью прокрутки страницы
```bash
bat --version
bat /var/log/syslog
```
2) Установить `fzf` с помощью [github репозитория](https://github.com/junegunn/fzf?tab=readme-ov-file#using-git)
> [!WARNING]  
> там есть разные методы, здесь ОБЯЗАТЕЛЬНО использовать git

При вызове `fzf` появится интерактивное приглашение, в котором можно вводить текст, чтобы отфильтровать файлы и каталоги; Enter, чтобы выбрать файл

3) Установить [mongodb](https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-debian/) (ссылка доступна под VPN)
4) Установить [percona](https://docs.percona.com/percona-server/8.0/apt-repo.html#install-percona-server-for-mysql-using-apt)
5) Установить zsh из [исходников](https://github.com/zsh-users/zsh/tree/master)
> [!WARNING]  
> да, можно просто через `apt`, но нам интереснее пощупать именно такой способ

# Работа с текстом
1) С помощью ps aux и awk вывести список процессов пользователя root с потреблением памяти больше 1% (таких может и не быть)
2) Найти во всех файлах `.conf` в директории `/etc` строки, содержащие "port" или "host"
3) Из вывода ls -l извлечь только права доступа и имя файла для всех файлов в текущей директории
4) Используя утилиту `du` вывести топ-5 самых "тяжелых" директорий в /var
5) Создать на машине файл `nginx.conf`; содержание файла доступно по ссылке: https://gist.github.com/AnastasiyaGapochkina01/d25ca3900df6c9221a4b613d65270e78  \
в нем найти
- все server_name
- все listen директивы
- все location блоки
- все root директории
6) создать файлы
- `apache-access.log`; содержание файла доступно по ссылке: https://gist.github.com/AnastasiyaGapochkina01/80a8ce358e866d2a76e5582344a236cf
- `apache-error.log`; содержание файла доступно по ссылке: https://gist.github.com/AnastasiyaGapochkina01/216feb9b58334fe306aa43384b24f9b3
7) Для `apache-access.log` 
- посчитать количество запросов для каждого HTTP-статуса (200, 404, 500 и т.д.).
- найти 5 IP-адресов, с которых было больше всего запросов
- найти все запросы к файлам с расширением `.php`
- найти все запросы, содержащие параметры (символ '?' в URL)
- найти все запросы, где указано имя пользователя (третье поле не равно '-')
8) для `apache-error.log`
- определить типы ошибок (например, [core:error]) и посчитать количество каждого типа
- найти все ошибки, связанные с IP-адресом 192.168.1.107

# Пользователи и права доступа
1) Удалить всех пользователей и все группы, созданные в прошлых домашках
2) Создать
- пользователя `devuser` с домашней директорией `/opt/users/devuser` и комментарием "Development User"
- пользователя `testuser` с домашней директорией `/opt/users/testuser` и комментарием "QA User"
- пользователя `opstuser` с домашней директорией `/opt/users/opstuser` и комментарием "OPS User"
- группу `ecom` и добавить в нее всех созданных пользователей
3) Создать файл `/opt/ecom/secret.txt` с содержимым "Confidential data". Назначить ему владельцем `opsuser`, а группой-владельцев - `ecom`. Настроить права так, чтобы:
- владелец мог читать и писать
- группа могла только читать
- остальные не имели доступа совсем
4) Для пользователя `devuser` установить _постоянный_ umask 0027
5) Создать директорию `/opt/shared/data` и несколько файлов в ней с произвольным содержимым. Рекурсивно изменить владельца всех файлов  на пользователя `devuser` и группу `root`
6) Настроить права доступа к домашним директориям пользователей так, чтобы они были доступны только владельцам
7) Создать пользователя `ftpuser` без возможности входа в систему (без shell), но с домашней директорией
8) Настроить права sudo для пользователя `opsuser` , разрешив ему выполнять все команды без ввода пароля
